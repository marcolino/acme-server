{"version":3,"file":"static/js/310.05dc753d.chunk.js","mappings":"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","sources":["../.yarn/__virtual__/@material-ui-icons-virtual-e4dee57b3b/0/cache/@material-ui-icons-npm-4.11.3-da22086c60-f849a8c4fe.zip/node_modules/@material-ui/icons/esm/Person.js","../.yarn/__virtual__/@material-ui-icons-virtual-e4dee57b3b/0/cache/@material-ui-icons-npm-4.11.3-da22086c60-f849a8c4fe.zip/node_modules/@material-ui/icons/esm/Email.js","../.yarn/__virtual__/@material-ui-icons-virtual-e4dee57b3b/0/cache/@material-ui-icons-npm-4.11.3-da22086c60-f849a8c4fe.zip/node_modules/@material-ui/icons/esm/Phone.js","../.yarn/__virtual__/@material-ui-icons-virtual-e4dee57b3b/0/cache/@material-ui-icons-npm-4.11.3-da22086c60-f849a8c4fe.zip/node_modules/@material-ui/icons/esm/SupervisedUserCircle.js","../.yarn/__virtual__/@material-ui-icons-virtual-e4dee57b3b/0/cache/@material-ui-icons-npm-4.11.3-da22086c60-f849a8c4fe.zip/node_modules/@material-ui/icons/esm/PlaylistAddCheck.js","../.yarn/__virtual__/@material-ui-icons-virtual-e4dee57b3b/0/cache/@material-ui-icons-npm-4.11.3-da22086c60-f849a8c4fe.zip/node_modules/@material-ui/icons/esm/LocationOn.js","../.yarn/__virtual__/@material-ui-icons-virtual-e4dee57b3b/0/cache/@material-ui-icons-npm-4.11.3-da22086c60-f849a8c4fe.zip/node_modules/@material-ui/icons/esm/Payment.js","../.yarn/__virtual__/@material-ui-icons-virtual-e4dee57b3b/0/cache/@material-ui-icons-npm-4.11.3-da22086c60-f849a8c4fe.zip/node_modules/@material-ui/icons/esm/Business.js","components/EditUser.js"],"sourcesContent":["import * as React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z\"\n}), 'Person');","import * as React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z\"\n}), 'Email');","import * as React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z\"\n}), 'Phone');","import * as React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M11.99 2c-5.52 0-10 4.48-10 10s4.48 10 10 10 10-4.48 10-10-4.48-10-10-10zm3.61 6.34c1.07 0 1.93.86 1.93 1.93 0 1.07-.86 1.93-1.93 1.93-1.07 0-1.93-.86-1.93-1.93-.01-1.07.86-1.93 1.93-1.93zm-6-1.58c1.3 0 2.36 1.06 2.36 2.36 0 1.3-1.06 2.36-2.36 2.36s-2.36-1.06-2.36-2.36c0-1.31 1.05-2.36 2.36-2.36zm0 9.13v3.75c-2.4-.75-4.3-2.6-5.14-4.96 1.05-1.12 3.67-1.69 5.14-1.69.53 0 1.2.08 1.9.22-1.64.87-1.9 2.02-1.9 2.68zM11.99 20c-.27 0-.53-.01-.79-.04v-4.07c0-1.42 2.94-2.13 4.4-2.13 1.07 0 2.92.39 3.84 1.15-1.17 2.97-4.06 5.09-7.45 5.09z\"\n}), 'SupervisedUserCircle');","import * as React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M14 10H2v2h12v-2zm0-4H2v2h12V6zM2 16h8v-2H2v2zm19.5-4.5L23 13l-6.99 7-4.51-4.5L13 14l3.01 3 5.49-5.5z\"\n}), 'PlaylistAddCheck');","import * as React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z\"\n}), 'LocationOn');","import * as React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z\"\n}), 'Payment');","import * as React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12 7V3H2v18h20V7H12zM6 19H4v-2h2v2zm0-4H4v-2h2v2zm0-4H4V9h2v2zm0-4H4V5h2v2zm4 12H8v-2h2v2zm0-4H8v-2h2v2zm0-4H8V9h2v2zm0-4H8V5h2v2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8v10zm-2-8h-2v2h2v-2zm0 4h-2v2h2v-2z\"\n}), 'Business');","import React, { useState, useEffect, useContext } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { usePromiseTracker } from \"react-promise-tracker\";\nimport { useTranslation } from \"react-i18next\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport { Grid, Container, Box } from \"@material-ui/core\";\nimport {\n  Person, Email, Phone, SupervisedUserCircle, PlaylistAddCheck,\n  Payment, Business, LocationOn as LocationOnIcon\n} from \"@material-ui/icons\";\nimport { FormTitle, FormInput, FormPhoneInput, FormSelect, FormButton, FormText } from \"./FormElements\";\nimport { getUser, updateUser, getAllRoles, getAllPlans } from \"../libs/Fetch\";\n//import { mergeObjects } from \"../libs/Misc\";\nimport { toast } from \"./Toast\";\nimport { AuthContext } from \"../providers/AuthProvider\";\nimport {\n  validateFirstName,\n  validateLastName,\n  validateEmail,\n  validatePhone,\n} from \"../libs/Validation\";\nimport config from \"../config\";\n\nconst styles = theme => ({\n  fieldset: {\n    border: 0,\n  },\n});\nconst useStyles = makeStyles((theme) => (styles(theme)));\n\n\n\nfunction EditUser(props) {\n  const classes = useStyles();\n  const history = useHistory();\n  const userId = props?.match?.params?.userId;\n  const [user, setUser] = useState(false);\n  const [error, setError] = useState({});\n  const { auth, setAuth } = useContext(AuthContext);\n  const { promiseInProgress } = usePromiseTracker({delay: config.spinner.delay});\n  const { t } = useTranslation();\n  // const apiKey = process.env.REACT_APP_GEOAPIFY_API_KEY;\n\n  const [allRoles, setAllRoles] = React.useState(false);\n  const [allPlans, setAllPlans] = React.useState(false);\n    \n  const [updateReady, setUpdateReady] = useState(false); // to handle form values changes refresh\n\n  if (!userId) {\n    toast.error(t(\"No user id specified\"));\n    history.goBack();\n    return;\n  }\n\n  useEffect(() => {\n    if (updateReady) {\n      setUpdateReady(false);\n      formSubmit();\n    }\n  }, [updateReady]);\n\n  useEffect(() => {\n    getAllRoles().then((data) => {\n      if (!data.ok) {\n        console.warn(\"getAllRoles error:\", data);\n        if (data.message) {\n          toast.error(t(data.message)); \n        }\n        return;\n      }\n      //console.info(\"getAllRoles data:\", data);\n      setAllRoles(data.roles);\n      console.log(\"getAllRoles success:\", data);\n    });\n  }, [t]);\n\n  useEffect(() => {\n    getAllPlans().then((data) => {\n      if (!data.ok) {\n        console.warn(\"getAllPlans error:\", data);\n        if (data.message) {\n          toast.error(t(data.message)); \n        }\n        return;\n      }\n      //console.info(\"getAllPlans data:\", data);\n      setAllPlans(data.plans);\n      console.log(\"getAllPlans success:\", data);\n    });\n  }, [t]);\n\n  useEffect(() => {\n    getUser({ userId }).then((data) => {\n      if (!data.ok) {\n        console.warn(\"getUser error:\", data);\n        if (data.message) {\n          toast.error(t(data.message)); \n        }\n        return;\n      }\n      //toast.info(`${data.user.firstName} ${data.user.lastName} loaded`);\n      setUser(data.user);\n      console.log(\"getUser success:\", data);\n    });\n  }, [t]);\n\n  const validateForm = () => {\n    let response;\n\n    // validate firstName formally\n    response = validateFirstName(user.firstName);\n    if (response !== true) {\n      let err;\n      switch (response) {\n        case \"ERROR_PLEASE_SUPPLY_A_FIRSTNAME\":\n          err = t(\"Please supply a first name\");\n          break;\n        case \"ERROR_PLEASE_SUPPLY_A_VALID_FIRSTNAME\":\n          err = t(\"Please supply a valid first name\");\n          break;\n        default:\n          err = response;\n      }\n      setError({ firstName: err });\n      toast.warning(err);\n      return false;\n    }\n\n    // validate lastName formally\n    response = validateLastName(user.lastName);\n    if (response !== true) {\n      let err;\n      switch (response) {\n        case \"ERROR_PLEASE_SUPPLY_A_LASTNAME\":\n          err = t(\"Please supply a last name\");\n          break;\n        case \"ERROR_PLEASE_SUPPLY_A_VALID_LASTNAME\":\n          err = t(\"Please supply a valid last name\");\n          break;\n        default:\n          err = response;\n      }\n      setError({ lastName: err });\n      toast.warning(err);\n      return false;\n    }\n\n    // validate email formally\n    response = validateEmail(user.email);\n    if (response !== true) {\n      let err;\n      switch (response) {\n        case \"ERROR_PLEASE_SUPPLY_AN_EMAIL\":\n          err = t(\"Please supply an email\");\n          break;\n        case \"ERROR_PLEASE_SUPPLY_A_VALID_EMAIL\":\n          err = t(\"Please supply a valid email\");\n          break;\n        default:\n          err = response;\n      }\n      setError({ email: err });\n      toast.warning(err);\n      return false;\n    }\n\n    // validate phone formally, and format it according to standard format, if necessary\n    response = validatePhone(user.phone);\n    if (response !== true) {\n      let err, oldPhone, newPhone;\n      switch (response) {\n        case \"ERROR_PLEASE_SUPPLY_A_PHONE_NUMBER\":\n          err = t(\"Please supply a phone\");\n          break;\n        case \"ERROR_PLEASE_SUPPLY_A_VALID_PHONE\":\n          err = t(\"Please supply a valid phone\");\n          break;\n        case \"WARNING_NO_INTERNATIONAL_PREFIX\":\n          oldPhone = user.phone;\n          newPhone = `${config.i18n.phonePrefix} ${oldPhone}`;\n          setUser({ ...user, phone: newPhone });\n          return true;\n        case \"WARNING_ZERO_INTERNATIONAL_PREFIX\":\n          const internationalPrefixZeroRegex = /(^00\\s?)/;\n          const internationalPrefixPlus = \"+\";\n          oldPhone = user.phone;\n          newPhone = oldPhone.replace(internationalPrefixZeroRegex, internationalPrefixPlus);\n          setUser({ ...user, phone: newPhone });\n          return true;\n        default:\n          err = response;\n      }\n      setError({ email: err });\n      toast.warning(err);\n      return false;\n    }\n\n    return true;\n  };\n\n  const setFirstName = (value) => {\n    setUser({ ...user, firstName: value });\n  };\n\n  const setLastName = (value) => {\n    setUser({ ...user, lastName: value });\n  };\n  \n  const setEmail = (value) => {\n    setUser({ ...user, email: value });\n  };\n\n  const setPhone = (value) => {\n    setUser({ ...user, phone: value });\n  };\n\n  const setRoles = (values) => {\n    // console.log(\"handleRolesChange values:\", values);\n    const roles = allRoles.filter(role => values.includes(role.name));\n    // console.log(\"handleRolesChange roles:\", roles);\n    setUser({ ...user, roles });\n  };\n\n  const setPlan = (value) => {\n    // console.log(\"handlePlanChange value:\", value);\n    const plan = allPlans.find(plan => value === plan.name);\n    // console.log(\"handlePlanChange plan:\", plan);\n    setUser({ ...user, plan });\n  };\n\n  const setAddress = (value) => {\n    setUser({ ...user, address: value });\n  };\n\n  const setFiscalCode = (value) => {\n    setUser({ ...user, fiscalCode: value });\n  };\n  \n  const setBusinessName = (value) => {\n    setUser({ ...user, businessName: value });\n  };\n\n  // const setProfileImage = (value) => {\n  //   setUser({ ...user, profileImage: value });\n  // };\n\n  const formSubmitBeforeUpdate = (e) => {\n    e.preventDefault();\n    if (!validateForm()) return;\n    setUpdateReady(true); // set this flag and the updateUser, since we can force some changes on user input fields\n    setError({});\n  }\n\n  const formSubmit = (e) => {\n    updateUser({ userId, ...user }).then(data => {\n      if (!data.ok) {\n        console.warn(\"updateUser error:\", data);\n        toast.error(t(data.message));\n        setError({});\n        return;\n      }\n      console.log(\"updateUser success:\", data.user);\n\n/**\n * TODO: check why these fields are in auth, and if they are really needed:\n *  - phone\n *  - ok\n * and check plan (which is {supportTypes: Array(1), _id: '66b385bbb1f43bf477a6d6a1', name: 'free', priceCurrency: 'EUR', pricePerYear: 0})\n * and roles (which is ['admin'])\n */\n      \n      if (auth.user.id === data.user._id) { // the user is the logged one\n        // update user fields in auth\n        const updatedUser = auth.user;\n        updatedUser.email = data.user.email;\n        updatedUser.firstName = data.user.firstName;\n        updatedUser.lastName = data.user.lastName;\n        console.log(\" *** updated user ***:\", data.user);\n        setAuth({ user: updatedUser });\n      }\n\n      history.goBack();\n    }).catch(err => {\n      console.error(\"updateUser error catched:\", err);\n      toast.error(t(err.message));\n      setError({}); // we can't blame some user input, it's a server side error\n    });\n  };\n\n  const formCancel = (e) => {\n    e.preventDefault();\n    setError({});\n    history.goBack();\n  }\n\n  // const resetForm = () => {\n  //   set\n  //   setFirstName(\"\");\n  //   setEmail(\"\");\n  // }\n\n  // function onPlaceSelect(value) {\n  //   console.log(\"onPlaceSelect:\", value);\n  // }\n\n  // function onSuggectionChange(value) {\n  //   console.log(\"onSuggectionChange:\", value);\n  // }\n \n  if (!user) {\n    return (\n      <p> loading user... </p>\n    );\n  }\n  if (!allRoles) {\n    return (\n      <p> loading all roles... </p>\n    );\n  }\n  if (!allPlans) {\n    return (\n      <p> loading all plans... </p>\n    );\n  }\n  \n  return (\n    <>\n      <FormTitle>\n        {t(\"Edit user\")}\n      </FormTitle>\n\n      <Container maxWidth=\"xs\">\n\n        <form className={classes.form} noValidate autoComplete=\"off\">\n          <fieldset disabled={promiseInProgress} className={classes.fieldset}>\n\n            <Box m={2} />\n\n            <FormInput\n              autofocus\n              id={\"firstName\"}\n              value={user.firstName}\n              onChange={(e) => setFirstName(e.target.value)}\n              placeholder={t(\"First Name\")}\n              startAdornmentIcon={<Person />}\n              error={error.firstName}\n            />\n\n            <FormInput\n              id={\"lastName\"}\n              value={user.lastName}\n              onChange={(e) => setLastName(e.target.value)}\n              placeholder={t(\"Last Name\")}\n              startAdornmentIcon={<Person />}\n              error={error.lastName}\n            />\n\n            <FormInput\n              id={\"email\"}\n              value={user.email}\n              onChange={(e) => setEmail(e.target.value)}\n              placeholder={t(\"Email\")}\n              startAdornmentIcon={<Email />}\n              error={error.email}\n            />\n\n            <FormPhoneInput\n              id={\"phone\"}\n              value={user.phone}\n              onChange={(e) => setPhone(e.target.value)}\n              placeholder={t(\"Phone\")}\n              startAdornmentIcon={<Phone />}\n              error={error.phone}\n            />\n\n            <FormSelect\n              id={\"roles\"}\n              //value={user ? user?.roles?.map(role => role.name) : []}\n              value={user.roles.map(role => role.name)}\n              options={allRoles.map(role => role.name)}\n              multiple={true}\n              onChange={(e) => setRoles(e.target.value)}\n              placeholder={t(\"Roles\")}\n              startAdornmentIcon={<SupervisedUserCircle />}\n              error={error.roles}\n            />\n          \n            {config.ui.usePlans && (\n              <FormSelect\n                id={\"plan\"}\n                //value={user ? user?.roles?.map(role => role.name) : []}\n                value={user.plan.name}\n                options={allPlans.map(plan => plan.name)}\n                multiple={false}\n                onChange={(e) => setPlan(e.target.value)}\n                placeholder={t(\"Plan\")}\n                startAdornmentIcon={<PlaylistAddCheck />}\n                error={error.plan}\n              />\n            )}\n            \n            <FormInput\n              id={\"address\"}\n              value={user.address}\n              onChange={(e) => setAddress(e.target.value)}\n              placeholder={t(\"Address\")}\n              startAdornmentIcon={<LocationOnIcon />}\n              error={error.address}\n            />\n            {/* <PlacesAutocomplete /> */}\n            \n            <FormInput\n              id={\"fiscalCode\"}\n              value={user.fiscalCode}\n              onChange={(e) => setFiscalCode(e.target.value)}\n              placeholder={t(\"Tax Code or VAT Number\")}\n              startAdornmentIcon={<Payment />}\n              error={error.address}\n            />\n\n            <FormInput\n              id={\"businessName\"}\n              value={user.businessName}\n              onChange={(e) => setBusinessName(e.target.value)}\n              placeholder={t(\"Business name\")}\n              startAdornmentIcon={<Business />}\n              error={error.businessName}\n            />\n\n            {/* <FormInput\n              id={\"profileImage\"}\n              value={user.profileImage}\n              onChange={(e) => setProfileImage(e.target.value)}\n              placeholder={t(\"Profile image\")}\n              startAdornmentIcon={<PermIdentity />}\n              error={error.profileImage}\n            /> */}\n  \n            <Box m={2} />\n\n            <FormButton\n              onClick={formSubmitBeforeUpdate}\n            >\n              {t(\"Confirm\")}\n            </FormButton>\n\n            <Grid container justifyContent=\"flex-end\">\n              <FormButton\n                onClick={formCancel}\n                fullWidth={false}\n                className={\"buttonSecondary\"}\n              >\n                {t(\"Cancel\")}\n              </FormButton>\n              </Grid>\n\n          </fieldset>\n        </form>\n\n      </Container>\n    </>\n  );\n}\n\nexport default React.memo(EditUser);\n"],"names":["createSvgIcon","React","d","useStyles","makeStyles","theme","fieldset","border","EditUser","props","_props$match","_props$match$params","classes","history","useHistory","userId","match","params","user","setUser","useState","error","setError","auth","setAuth","useContext","AuthContext","promiseInProgress","usePromiseTracker","delay","config","spinner","t","useTranslation","allRoles","setAllRoles","allPlans","setAllPlans","updateReady","setUpdateReady","toast","goBack","useEffect","formSubmit","getAllRoles","then","data","ok","console","warn","message","roles","log","getAllPlans","plans","getUser","e","updateUser","id","_id","updatedUser","email","firstName","lastName","catch","err","_jsxs","_Fragment","children","_jsx","FormTitle","Container","maxWidth","className","form","noValidate","autoComplete","disabled","Box","m","FormInput","autofocus","value","onChange","setFirstName","target","placeholder","startAdornmentIcon","Person","setLastName","setEmail","Email","FormPhoneInput","phone","setPhone","Phone","FormSelect","map","role","name","options","multiple","values","filter","includes","setRoles","SupervisedUserCircle","ui","usePlans","plan","find","setPlan","PlaylistAddCheck","address","setAddress","LocationOnIcon","fiscalCode","setFiscalCode","Payment","businessName","setBusinessName","Business","FormButton","onClick","preventDefault","validateForm","response","validateFirstName","warning","validateLastName","validateEmail","validatePhone","oldPhone","newPhone","i18n","phonePrefix","internationalPrefixZeroRegex","internationalPrefixPlus","replace","Grid","container","justifyContent","fullWidth"],"sourceRoot":""}