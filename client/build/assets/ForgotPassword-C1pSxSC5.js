import{a as Y,b as B,R as X,r as i,d as $,f as z,u as G,j as e,B as m,T as g,C as p,D as q,g as J,h as K,i as Q,k as E,m as Z,n as ee}from"./index-kZazlTzH.js";import{C as se}from"./ConfirmationNumber-C3_S1Cdf.js";import{T as y,L as R}from"./TextFieldPassword-BqjSt6Lq.js";import{E as oe}from"./Email-bwE1I_j6.js";import{S as _}from"./TextField-BpUCQOYc.js";import{A as ae}from"./Avatar-DcajoSMt.js";import"./Select-BP4I_6h9.js";const re=Y(B.jsx("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h2c0-1.66 1.34-3 3-3s3 1.34 3 3v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m0 12H6V10h12zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2"}),"LockOpenOutlined");function te(){const[l,D]=i.useState(""),[h,c]=i.useState(""),[f,N]=i.useState(""),[u,t]=i.useState({email:!1,password:!1,passwordConfirmed:!1,code:!1}),[d,b]=i.useState(!1),[V,O]=i.useState(""),[P,w]=i.useState(""),A=$(),[I,j]=i.useState(!1),[k,L]=i.useState(null),[T,M]=i.useState(null),[v,C]=i.useState(null),{showSnackbar:n}=z(),{t:a}=G(),x=(o,s,r)=>{L(o),M(s),C(()=>r),j(!0)},F=()=>{j(!1),v&&(C(null),v())},S=()=>{if(!d){const o=Z(l);if(o!==!0){let s;switch(o){case"ERROR_PLEASE_SUPPLY_AN_EMAIL":s=a("Please supply an email");break;case"ERROR_PLEASE_SUPPLY_A_VALID_EMAIL":s=a("Please supply a valid email");break;default:s=o}return n(s,"warning"),t({email:!0}),!1}}if(d){const[o,s]=ee(h,f);if(o!==!0){let r;switch(o){case"ERROR_PLEASE_SUPPLY_A_PASSWORD":r=a("Please supply a password");break;case"ERROR_PLEASE_SUPPLY_A_MORE_COMPLEX_PASSWORD":r=a("Please supply a more complex password")+`.

`+s;break;case"PLEASE_CONFIRM_THE_PASSWORD":r=a("Please confirm the password");break;case"ERROR_THE_CONFIRMED_PASSWORD_DOES_NOT_MATCH_THE_PASSWORD":r=a("The confirmed password does not match the password");break;default:r=o}return n(r,"warning"),t({password:!0}),!1}}return!0},W=async o=>{if(o.preventDefault(),!S())return;t({});const s=await E("post","/auth/resetPassword",{email:l});if(s.err)n(s.err,"error"),t({});else{console.devAlert(`SIGNUP VERIFICATION CODE: ${s.code}`),b(!0),c("");const r=s.codeDeliveryMedium;O(r),x(a("Confirmation code sent"),s.message,()=>{})}},U=async o=>{var r;if(o.preventDefault(),!S())return;t({});const s=await E("post","/auth/resetPasswordConfirm",{email:l,code:P,password:h,passwordConfirmed:f});if(s.err)switch(n(s.message,"error"),(r=s.data)==null?void 0:r.code){case"CODE_NOT_FOUND":t({confirmationCode:!0});break;case"CODE_INVALID_OR_EXPIRED":t({confirmationCode:!0});break;default:t({password:!0})}else b(!1),D(""),c(""),N(""),w(""),x(a("Password reset success"),a("You can sign in with your new password"),()=>{A("/signin",{replace:!0})})},H=async o=>{o.preventDefault(),t({});const s=await E("post","/auth/resendResetPasswordCode",{email:l});if(s.err){switch(s.code){case"CODE_NOT_FOUND":t({confirmationCode:!0});break;case"CODE_INVALID_OR_EXPIRED":t({confirmationCode:!0});break;default:t({password:!0})}n(s.message,"warning")}else console.devAlert(`SIGNUP VERIFICATION CODE: ${s.code}`),b(!0),c(""),N(""),w(""),x(a("Reset code resent"),s.message,()=>{})};return e.jsxDEV("form",{noValidate:!0,autoComplete:"on",children:[e.jsxDEV(m,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"start",mt:6},children:e.jsxDEV(m,{sx:{width:"100%",maxWidth:400,p:2,border:"1px solid",borderColor:"primary.main",borderRadius:4},children:[e.jsxDEV(m,{sx:{display:"flex",justifyContent:"center",mt:0,mb:3},children:e.jsxDEV(ae,{sx:{backgroundColor:"primary.main"},children:e.jsxDEV(re,{},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/ForgotPassword.jsx",lineNumber:232,columnNumber:15},this)},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/ForgotPassword.jsx",lineNumber:231,columnNumber:13},this)},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/ForgotPassword.jsx",lineNumber:223,columnNumber:11},this),!d&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV(g,{variant:"body1",color:"textSecondary",sx:{display:"flex",justifyContent:"center",my:1},children:a("Reset password")},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/ForgotPassword.jsx",lineNumber:237,columnNumber:15},this),e.jsxDEV(_,{autoFocus:!0,id:"email",value:l,onChange:o=>D(o.target.value),placeholder:a("Email"),startIcon:e.jsxDEV(oe,{},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/ForgotPassword.jsx",lineNumber:252,columnNumber:28},this),error:u.email},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/ForgotPassword.jsx",lineNumber:246,columnNumber:15},this),e.jsxDEV(m,{m:1},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/ForgotPassword.jsx",lineNumber:255,columnNumber:15},this),e.jsxDEV(p,{type:"submit",onClick:W,sx:{mt:1,textAlign:"center"},children:a("Request password reset")},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/ForgotPassword.jsx",lineNumber:256,columnNumber:15},this)]},void 0,!0,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/ForgotPassword.jsx",lineNumber:236,columnNumber:13},this),d&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV(g,{variant:"body1",color:"textSecondary",sx:{display:"flex",justifyContent:"center",my:1},children:a("New password")},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/ForgotPassword.jsx",lineNumber:267,columnNumber:15},this),e.jsxDEV(_,{id:"confirmationCode",type:"tel",value:P,autoComplete:"off",onChange:o=>w(o.target.value),placeholder:a("Numeric code received by {{codeDeliveryMedium}}",{codeDeliveryMedium:V}),startIcon:e.jsxDEV(se,{},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/ForgotPassword.jsx",lineNumber:283,columnNumber:28},this),error:u.confirmationCode},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/ForgotPassword.jsx",lineNumber:276,columnNumber:15},this),e.jsxDEV(m,{m:1},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/ForgotPassword.jsx",lineNumber:286,columnNumber:15},this),e.jsxDEV(y,{autoFocus:!0,id:"password",type:"password",value:h,autoComplete:"new-password",onChange:o=>c(o.target.value),placeholder:a("New password"),startIcon:e.jsxDEV(R,{},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/ForgotPassword.jsx",lineNumber:295,columnNumber:28},this),error:u.password},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/ForgotPassword.jsx",lineNumber:287,columnNumber:15},this),e.jsxDEV(m,{m:1},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/ForgotPassword.jsx",lineNumber:298,columnNumber:15},this),e.jsxDEV(y,{id:"passwordConfirmed",type:"password",value:f,autoComplete:"new-password-confirmation",onChange:o=>N(o.target.value),placeholder:a("New password confirmation"),startIcon:e.jsxDEV(R,{},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/ForgotPassword.jsx",lineNumber:306,columnNumber:28},this),error:u.passwordConfirmed},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/ForgotPassword.jsx",lineNumber:299,columnNumber:15},this),e.jsxDEV(p,{type:"submit",onClick:U,children:a("Set new password")},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/ForgotPassword.jsx",lineNumber:309,columnNumber:15},this),e.jsxDEV(p,{type:"submit",onClick:H,fullWidth:!1,size:"small",color:"tertiary",sx:{float:"right",marginLeft:"auto",marginRight:0,mt:2},children:a("Resend code")},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/ForgotPassword.jsx",lineNumber:313,columnNumber:15},this)]},void 0,!0,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/ForgotPassword.jsx",lineNumber:266,columnNumber:13},this)]},void 0,!0,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/ForgotPassword.jsx",lineNumber:213,columnNumber:9},this)},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/ForgotPassword.jsx",lineNumber:204,columnNumber:7},this),e.jsxDEV(q,{open:I,onClose:F,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsxDEV(J,{id:"alert-dialog-title",children:k},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/ForgotPassword.jsx",lineNumber:330,columnNumber:9},this),e.jsxDEV(K,{id:"alert-dialog-description",children:e.jsxDEV(g,{variant:"body1",sx:{whiteSpace:"pre-line"},children:T},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/ForgotPassword.jsx",lineNumber:334,columnNumber:11},this)},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/ForgotPassword.jsx",lineNumber:333,columnNumber:9},this),e.jsxDEV(Q,{children:e.jsxDEV(p,{onClick:F,fullWidth:!1,autoFocus:!0,children:a("Ok")},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/ForgotPassword.jsx",lineNumber:339,columnNumber:11},this)},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/ForgotPassword.jsx",lineNumber:338,columnNumber:9},this)]},void 0,!0,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/ForgotPassword.jsx",lineNumber:324,columnNumber:7},this)]},void 0,!0,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/ForgotPassword.jsx",lineNumber:202,columnNumber:5},this)}const pe=X.memo(te);export{pe as default};
