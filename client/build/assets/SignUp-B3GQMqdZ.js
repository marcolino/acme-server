import{a as oe,b as B,R as te,d as re,r as t,e as $,A as ne,f as me,u as le,j as e,B as m,c as N,T as c,C as h,L as C,G as ce,D as ue,g as pe,h as de,i as he,k as U,v as fe,l as Ne,m as ge,n as xe}from"./index-kZazlTzH.js";import{S as g}from"./TextField-BpUCQOYc.js";import{T as H,L as X}from"./TextFieldPassword-BqjSt6Lq.js";import{A as be}from"./Avatar-DcajoSMt.js";import{P as z}from"./Person-DZc_YTe7.js";import{E as Se}from"./Email-bwE1I_j6.js";import{G as je,F as Ee}from"./Google-GoK6UuI5.js";import{C as ve}from"./ConfirmationNumber-C3_S1Cdf.js";import"./Select-BP4I_6h9.js";const De=oe([B.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2M7.35 18.5C8.66 17.56 10.26 17 12 17s3.34.56 4.65 1.5c-1.31.94-2.91 1.5-4.65 1.5s-3.34-.56-4.65-1.5m10.79-1.38C16.45 15.8 14.32 15 12 15s-4.45.8-6.14 2.12C4.7 15.73 4 13.95 4 12c0-4.42 3.58-8 8-8s8 3.58 8 8c0 1.95-.7 3.73-1.86 5.12"},"0"),B.jsx("path",{d:"M12 6c-1.93 0-3.5 1.57-3.5 3.5S10.07 13 12 13s3.5-1.57 3.5-3.5S13.93 6 12 6m0 5c-.83 0-1.5-.67-1.5-1.5S11.17 8 12 8s1.5.67 1.5 1.5S12.83 11 12 11"},"1")],"AccountCircleOutlined");function ye(){const P=re(),[x,V]=t.useState(""),[b,A]=t.useState(""),[d,R]=t.useState(""),[S,w]=t.useState(""),[_,q]=t.useState(""),{waitingForCode:L}=$(),[l,F]=t.useState(L||!1),{codeDeliveryMedium:I}=$(),[O,k]=t.useState(I||""),[j,T]=t.useState(""),[u,r]=t.useState({}),[J,E]=t.useState(!1),[K,M]=t.useState(null),[Q,G]=t.useState(null),[W,v]=t.useState(null),{cloneGuestUserPreferencesToAuthUserOnSignup:Z}=t.useContext(ne),{showSnackbar:n}=me(),{t:i}=le();console.log("waitingForCodeFromParams, waitingForCode:",L,l),console.log("codeDeliveryMediumFromParams, codeDeliveryMedium:",I,O);const ee=(a,s)=>{a.preventDefault(),window.location.replace(`${N.siteUrl}/api/auth/${s.toLowerCase()}`)},D=(a,s,o)=>{M(a),G(s),v(()=>o),E(!0)},Y=()=>{E(!1),W&&(v(null),W())},y=a=>{let s;if(!l){if(s=fe(x),s!==!0){let o;switch(s){case"ERROR_PLEASE_SUPPLY_A_FIRSTNAME":o=i("Please supply first name");break;case"ERROR_PLEASE_SUPPLY_A_VALID_FIRSTNAME":o=i("Please supply a valid first name");break;default:o=s}return r({firstName:!0}),n(o,"warning"),!1}if(s=Ne(b),s!==!0){let o;switch(s){case"ERROR_PLEASE_SUPPLY_A_LASTNAME":o=i("Please supply last name");break;case"ERROR_PLEASE_SUPPLY_A_VALID_LASTNAME":o=i("Please supply a valid last name");break;default:o=s}return r({lastName:!0}),n(o,"warning"),!1}}if((!l||a!=null&&a.waitingForCodeResend)&&(s=ge(d),s!==!0)){let o;switch(s){case"ERROR_PLEASE_SUPPLY_AN_EMAIL":o=i("Please supply an email");break;case"ERROR_PLEASE_SUPPLY_A_VALID_EMAIL":o=i("Please supply a valid email");break;default:o=s}return r({email:!0}),n(o,"warning"),!1}if(!l){const[o,f]=xe(S,_);if(o!==!0){let p;switch(o){case"ERROR_PLEASE_SUPPLY_A_PASSWORD":p=i("Please supply a password");break;case"ERROR_PLEASE_SUPPLY_A_MORE_COMPLEX_PASSWORD":p=i("Please supply a more complex password")+`.

`+f;break;case"PLEASE_CONFIRM_THE_PASSWORD":p=i("Please confirm the password");break;case"ERROR_THE_CONFIRMED_PASSWORD_DOES_NOT_MATCH_THE_PASSWORD":p=i("The confirmed password does not match the password");break;default:p=o}return r({password:!0}),n(p,"warning"),!1}return!0}return l&&!(a!=null&&a.waitingForCodeResend)&&j.length<=0?(r({code:!0}),!1):!0},se=async a=>{var o;if(a.preventDefault(),!y())return;r({});const s=await U("post","/auth/signup",{email:d,password:S,firstName:x,lastName:b});if(s.err)switch((o=s.data)==null?void 0:o.code){case"ACCOUNT_WAITING_FOR_VERIFICATION":r({email:!0}),M(i("Account is waiting for verification")),G(s.data.message),v(()=>{F(!0)}),E(!0);break;case"EMAIL_EXISTS_ALREADY":case"ACCOUNT_DELETED":r({email:!0}),n(s.message,"warning");break;default:r({}),n(s.message,"error")}else{console.devAlert(`SIGNUP VERIFICATION CODE: ${s.code}`),F(!0),V(""),A(""),w("");const f=s.codeDeliveryMedium;k(f),D(i("Confirmation code sent by {{medium}}",{medium:f}),s.message,()=>{})}},ie=async a=>{if(a.preventDefault(),!y())return;r({});const s=await U("post","/auth/signupVerification",{email:d,code:j});s.err?(n(s.message,"error"),r({code:!0})):(R(""),T(""),Z(),D(i("Registered successfully"),s.message,()=>{P("/signin",{replace:!0})}))},ae=async a=>{if(a.preventDefault(),!y({waitingForCodeResend:!0}))return;r({});const s=await U("post","/auth/resendSignupVerificationCode",{email:d});if(s.err)n(s.message,"error"),r({code:!0});else{console.devAlert(`SIGNUP VERIFICATION CODE: ${s.code}`);const o=s.codeDeliveryMedium;k(o),D(i("Confirmation code resent by {{medium}}",{medium:o}),s.message,()=>{})}};return e.jsxDEV("form",{noValidate:!0,autoComplete:"on",children:[e.jsxDEV(m,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"start",mt:6},children:e.jsxDEV(m,{sx:{width:"100%",maxWidth:400,p:2,border:"1px solid",borderColor:"primary.main",borderRadius:4},children:[e.jsxDEV(m,{sx:{display:"flex",justifyContent:"center",mt:0,mb:3},children:e.jsxDEV(be,{sx:{backgroundColor:"primary.main"},children:e.jsxDEV(De,{},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/SignUp.jsx",lineNumber:312,columnNumber:15},this)},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/SignUp.jsx",lineNumber:311,columnNumber:13},this)},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/SignUp.jsx",lineNumber:303,columnNumber:11},this),!l&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV(c,{variant:"body1",color:"textSecondary",sx:{display:"flex",justifyContent:"center",my:1},children:i("Register with your data")},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/SignUp.jsx",lineNumber:317,columnNumber:15},this),e.jsxDEV(g,{autoFocus:!0,id:"firstName",value:x,onChange:a=>V(a.target.value),placeholder:i("First Name"),startIcon:e.jsxDEV(z,{},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/SignUp.jsx",lineNumber:332,columnNumber:28},this),error:u.firstName},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/SignUp.jsx",lineNumber:326,columnNumber:15},this),e.jsxDEV(g,{id:"lastName",value:b,onChange:a=>A(a.target.value),placeholder:i("Last Name"),startIcon:e.jsxDEV(z,{},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/SignUp.jsx",lineNumber:340,columnNumber:28},this),error:u.lastName},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/SignUp.jsx",lineNumber:335,columnNumber:15},this),e.jsxDEV(g,{id:"email",value:d,onChange:a=>R(a.target.value),placeholder:i("Email"),startIcon:e.jsxDEV(Se,{},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/SignUp.jsx",lineNumber:348,columnNumber:28},this),error:u.email},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/SignUp.jsx",lineNumber:343,columnNumber:15},this),e.jsxDEV(H,{id:"password",type:"password",value:S,onChange:a=>w(a.target.value),placeholder:i("Password"),startIcon:e.jsxDEV(X,{},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/SignUp.jsx",lineNumber:357,columnNumber:28},this),autoComplete:"password",error:u.password},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/SignUp.jsx",lineNumber:351,columnNumber:15},this),e.jsxDEV(H,{id:"passwordConfirmed",type:"password",value:_,onChange:a=>q(a.target.value),placeholder:i("Password confirmation"),startIcon:e.jsxDEV(X,{},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/SignUp.jsx",lineNumber:367,columnNumber:28},this),autoComplete:"password-confirmation",error:u.passwordConfirmed},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/SignUp.jsx",lineNumber:361,columnNumber:15},this),e.jsxDEV(m,{m:1},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/SignUp.jsx",lineNumber:371,columnNumber:15},this),e.jsxDEV(h,{type:"submit",onClick:se,sx:{mt:1,textAlign:"center"},children:i("Sign Up")},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/SignUp.jsx",lineNumber:372,columnNumber:15},this),e.jsxDEV(m,{sx:{display:"flex",justifyContent:"center",mt:2},children:e.jsxDEV(c,{variant:"body2",color:"textSecondary",children:[i("Already have an account?")," ",e.jsxDEV(C,{style:{cursor:"pointer"},underline:"hover",onClick:()=>P("/signin"),children:[i("Sign in"),"!"]},void 0,!0,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/SignUp.jsx",lineNumber:390,columnNumber:19},this)]},void 0,!0,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/SignUp.jsx",lineNumber:387,columnNumber:17},this)},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/SignUp.jsx",lineNumber:380,columnNumber:15},this),N.oauth.federatedSigninProviders.length&&e.jsxDEV(m,{children:[e.jsxDEV(c,{variant:"body2",color:"textSecondary",sx:{display:"flex",justifyContent:"center",my:3},children:i("or")},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/SignUp.jsx",lineNumber:401,columnNumber:19},this),e.jsxDEV(c,{variant:"body2",color:"textSecondary",sx:{display:"flex",justifyContent:"center",my:1},children:i("Sign in with a social account")},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/SignUp.jsx",lineNumber:410,columnNumber:19},this),e.jsxDEV(m,{display:"flex",flexDirection:"row",children:N.oauth.federatedSigninProviders.map((a,s)=>e.jsxDEV(h,{startIcon:a==="Google"?e.jsxDEV(je,{sx:{color:"red"}},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/SignUp.jsx",lineNumber:425,columnNumber:51},this):a==="Facebook"?e.jsxDEV(Ee,{sx:{color:"blue"}},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/SignUp.jsx",lineNumber:426,columnNumber:53},this):e.jsxDEV(Icon,{sx:{backgroundColor:"white",color:"red"},children:"G"},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/SignUp.jsx",lineNumber:427,columnNumber:27},this),sx:{mr:s<N.oauth.federatedSigninProviders.length-1?1:0},type:a==="Google"?"socialAuthButtonGoogle":a==="Facebook"?"socialAuthButtonFacebook":"",onClick:o=>ee(o,a),children:a},a,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/SignUp.jsx",lineNumber:422,columnNumber:23},this))},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/SignUp.jsx",lineNumber:419,columnNumber:19},this)]},void 0,!0,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/SignUp.jsx",lineNumber:400,columnNumber:17},this),e.jsxDEV(ce,{container:!0,justifyContent:"flex-start",sx:{mt:4},children:e.jsxDEV(c,{component:"h6",variant:"caption",color:"textSecondary",align:"center",children:[i("By signing up")," ",i("you agree to our")," ",e.jsxDEV(C,{href:"/terms-of-use",color:"textPrimary",children:i("terms of use")},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/SignUp.jsx",lineNumber:450,columnNumber:64},this)," "," ",i("and you confirm you have read our")," ",e.jsxDEV(C,{href:"/privacy-policy",color:"textPrimary",children:i("privacy policy")},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/SignUp.jsx",lineNumber:451,columnNumber:60},this),", "," ",i("including cookie use")," ","."]},void 0,!0,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/SignUp.jsx",lineNumber:449,columnNumber:17},this)},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/SignUp.jsx",lineNumber:448,columnNumber:15},this)]},void 0,!0,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/SignUp.jsx",lineNumber:316,columnNumber:13},this),l&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV(c,{variant:"body1",color:"textSecondary",sx:{display:"flex",justifyContent:"center",my:1},children:i("Verify Sign Up")},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/SignUp.jsx",lineNumber:459,columnNumber:15},this),e.jsxDEV(g,{id:"signUpCode",type:"tel",value:j,onChange:a=>T(a.target.value),placeholder:i("Numeric code received by {{codeDeliveryMedium}}",{codeDeliveryMedium:O}),startIcon:e.jsxDEV(ve,{},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/SignUp.jsx",lineNumber:475,columnNumber:28},this),error:u.code},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/SignUp.jsx",lineNumber:469,columnNumber:15},this),e.jsxDEV(m,{m:1},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/SignUp.jsx",lineNumber:478,columnNumber:15},this),e.jsxDEV(h,{type:"submit",onClick:ie,children:i("Verify Sign Up")},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/SignUp.jsx",lineNumber:479,columnNumber:15},this),e.jsxDEV(h,{onClick:ae,fullWidth:!1,size:"small",color:"tertiary",sx:{float:"right",marginLeft:"auto",marginRight:0,mt:1},children:i("Resend code")},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/SignUp.jsx",lineNumber:485,columnNumber:15},this)]},void 0,!0,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/SignUp.jsx",lineNumber:458,columnNumber:13},this)]},void 0,!0,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/SignUp.jsx",lineNumber:293,columnNumber:9},this)},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/SignUp.jsx",lineNumber:284,columnNumber:7},this),e.jsxDEV(ue,{open:J,onClose:Y,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsxDEV(pe,{id:"alert-dialog-title",children:K},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/SignUp.jsx",lineNumber:503,columnNumber:9},this),e.jsxDEV(de,{id:"alert-dialog-description",children:e.jsxDEV(c,{variant:"body1",sx:{whiteSpace:"pre-line"},children:Q},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/SignUp.jsx",lineNumber:507,columnNumber:11},this)},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/SignUp.jsx",lineNumber:506,columnNumber:9},this),e.jsxDEV(he,{children:e.jsxDEV(h,{onClick:Y,fullWidth:!1,autoFocus:!0,children:i("Ok")},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/SignUp.jsx",lineNumber:512,columnNumber:11},this)},void 0,!1,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/SignUp.jsx",lineNumber:511,columnNumber:9},this)]},void 0,!0,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/SignUp.jsx",lineNumber:497,columnNumber:7},this)]},void 0,!0,{fileName:"/home/marco/apps/sistemisolari/acme-client/src/components/auth/SignUp.jsx",lineNumber:283,columnNumber:5},this)}const Fe=te.memo(ye);export{Fe as default};
